<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Todo App - rwc Example</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family:
          system-ui,
          -apple-system,
          sans-serif;
        max-width: 600px;
        margin: 2rem auto;
        padding: 0 1rem;
        background: #f5f5f5;
      }

      .app {
        background: white;
        border-radius: 8px;
        padding: 2rem;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      }

      h1 {
        margin-bottom: 1.5rem;
        color: #333;
      }

      .add-todo {
        display: flex;
        gap: 0.5rem;
        margin-bottom: 1.5rem;
      }

      input[type="text"] {
        flex: 1;
        padding: 0.75rem;
        border: 2px solid #ddd;
        border-radius: 4px;
        font-size: 1rem;
      }

      input[type="text"]:focus {
        outline: none;
        border-color: #4caf50;
      }

      button {
        padding: 0.75rem 1.5rem;
        border: none;
        border-radius: 4px;
        font-size: 1rem;
        cursor: pointer;
        transition: background 0.2s;
      }

      .btn-add {
        background: #4caf50;
        color: white;
      }

      .btn-add:hover {
        background: #45a049;
      }

      .btn-add:disabled {
        background: #ccc;
        cursor: not-allowed;
      }

      .filters {
        display: flex;
        gap: 0.5rem;
        margin-bottom: 1rem;
        padding-bottom: 1rem;
        border-bottom: 2px solid #eee;
      }

      .filter-btn {
        padding: 0.5rem 1rem;
        background: #f0f0f0;
        color: #666;
      }

      .filter-btn.active {
        background: #4caf50;
        color: white;
      }

      .todos {
        list-style: none;
      }

      .todo-item {
        display: flex;
        align-items: center;
        gap: 1rem;
        padding: 1rem;
        border-bottom: 1px solid #eee;
        transition: background 0.2s;
      }

      .todo-item:hover {
        background: #f9f9f9;
      }

      .todo-checkbox {
        width: 20px;
        height: 20px;
        cursor: pointer;
      }

      .todo-text {
        flex: 1;
        font-size: 1rem;
      }

      .todo-text.completed {
        text-decoration: line-through;
        color: #999;
      }

      .btn-delete {
        padding: 0.5rem 1rem;
        background: #f44336;
        color: white;
        font-size: 0.875rem;
      }

      .btn-delete:hover {
        background: #da190b;
      }

      .stats {
        margin-top: 1rem;
        padding-top: 1rem;
        border-top: 2px solid #eee;
        color: #666;
        font-size: 0.875rem;
        display: flex;
        justify-content: space-between;
      }

      .empty-state {
        text-align: center;
        padding: 3rem 1rem;
        color: #999;
      }
    </style>
  </head>

  <body>
    <div class="app">
      <todo-app-spred x-cloak>
        <h1>üìù Todo App ‚Äî Spred</h1>

        <div class="add-todo">
          <input
            x-ref="input"
            type="text"
            x-prop:value="newTodo"
            x-on:input="onInput($event)"
            x-on:keyup="$event.key === 'Enter' && addTodo()"
            placeholder="What needs to be done?"
          />
          <button class="btn-add" x-on:click="addTodo()" x-prop:disabled="!canAdd">Add</button>
        </div>

        <div class="filters">
          <button
            class="filter-btn"
            x-class="{ active: filter === 'all' }"
            x-on:click="filter.set('all')"
          >
            All (<span x-text="todos.length"></span>)
          </button>
          <button
            class="filter-btn"
            x-class="{ active: filter === 'active' }"
            x-on:click="filter.set('active')"
          >
            Active (<span x-text="activeTodos.length"></span>)
          </button>
          <button
            class="filter-btn"
            x-class="{ active: filter === 'completed' }"
            x-on:click="filter.set('completed')"
          >
            Completed (<span x-text="completedTodos.length"></span>)
          </button>
        </div>

        <template x-if="filteredTodos.length === 0">
          <div class="empty-state">
            <p x-text="emptyMessage"></p>
          </div>
        </template>

        <ul class="todos" x-show="filteredTodos.length > 0">
          <template x-for="todo in filteredTodos" x-key="todo.id">
            <li class="todo-item">
              <input
                type="checkbox"
                class="todo-checkbox"
                x-prop:checked="todo.completed"
                x-on:change="toggleTodo(todo.id)"
              />
              <span class="todo-text" x-text="todo.text" x-class="{ completed: todo.completed }">
              </span>
              <button class="btn-delete" x-on:click="deleteTodo(todo.id)">Delete</button>
            </li>
          </template>
        </ul>

        <div class="stats" x-show="todos.length > 0">
          <span>
            <span x-text="activeTodos.length"></span>
            <span x-text="activeTodos.length === 1 ? 'item' : 'items'"></span>
            left
          </span>
          <button
            x-show="completedTodos.length > 0"
            x-on:click="clearCompleted()"
            style="background: transparent; color: #999; padding: 0"
          >
            Clear completed
          </button>
        </div>
      </todo-app-spred>
    </div>

    <script type="module" src="./main.ts"></script>
  </body>
</html>
